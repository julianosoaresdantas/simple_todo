<h1>Your Tasks</h1>

<% if policy(Task).new? %>
  <%= link_to 'New Task', new_task_path, class: 'btn btn-primary mb-3' %>
<% end %>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Status</th>
      <th colspan="3">Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td><%= task.title %></td>
        <td><%= task.description %></td>
        <td><%= task.status %></td>
        <td>
          <% if policy(task).show? %>
            <%= link_to 'Show', task %>
          <% end %>
        </td>
        <td>
          <% if policy(task).edit? %>
            <%= link_to 'Edit', edit_task_path(task) %>
          <% end %>
        </td>
        <td>
          <% if policy(task).destroy? %>
            <%= link_to 'Destroy', task, data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' } %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<% if @tasks.empty? %>
  <p>No tasks yet. Start by creating a new task!</p>
<% end %>